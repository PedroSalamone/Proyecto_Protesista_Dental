{% extends "blog/base.html" %}

{% block title %}Lista de Publicaciones{% endblock %}

{% block content %}
  <h1>Lista de Publicaciones</h1>
  <ul>
    {% for publicacion in publicaciones %}
      <li>
        <h2>{{ publicacion.titulo }}</h2>
        <p>{{ publicacion.contenido }}</p>
        {% if publicacion.imagen %}
          <img src="{{ publicacion.imagen.url }}" alt="{{ publicacion.titulo }}" style="max-width: 300px;">
        {% endif %}
        <p>Autor: {{ publicacion.autor.username }}</p>
        <p>Fecha de publicación: {{ publicacion.fecha_publicacion }}</p>
        <a href="{% url 'blog:blog_post_detail' pk=publicacion.id %}">Ver publicación</a>
      </li>
    {% empty %}
      <li>No hay publicaciones todavía.</li>
    {% endfor %}
  </ul>

  <h2>Agregar Publicación:</h2>
  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Agregar Publicación</button>
  </form>
{% endblock %}
